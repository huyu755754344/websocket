<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>hello</title>
    <script src="jquery.js"></script>
    <script src="sockjs.js"></script>
    <script src="stomp.js"></script>
</head>
<body>


    <textarea id="message" rows="3" cols="20"></textarea>
    <input id="send" type="button"  value="发送消息" >



<script>
    var sockJS= new SockJS("http://localhost:8080/socket");
    var stompClient = new Stomp.over(sockJS);
    stompClient.connect({},function (data) {
        stompClient.subscribe("/user/HuYu/sendMessage",function (response) {
            console.log(response.body);

        })
    })
    $("#send").click(function(){
        if($.trim($("#message").val())==''){
            console.log("空消息");
        }else {
            stompClient.send("/message", {}, JSON.stringify({
                name: "huyu",
                message: $("#message").val(),
                toName: "zhangsan"
            }));
        }
     })

</script>
</body>
</html>